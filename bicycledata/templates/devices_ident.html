{% extends "layout.html" %}
{% set title = device.name %}

{% block section %}
{% with messages = get_flashed_messages() %}
  {% if messages %}
  <section>
    <h4>Notification</h4>
    <ul class="alt">
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
  </section>
  {% endif %}
{% endwith %}

<section id="banner">
  <div class="content">
    <header>
      {% if device.online %}
      <h1><a class="icon solid fa-server" style="color: green;"></a> {{ device.project }}</h1>
      {% else %}
      <h1><a class="icon solid fa-server" style="color: red;"></a> {{ device.project }}</h1>
      {% endif %}
      <p>{{ device.model }}</p>
    </header>
    <p>{{ device.username }}@{{ device.hostname }}<br>
      {{ device.ping }}
    </p>

    <p>
    <ul>
      {% for sensor in device.sensors %}
      <li><a href="/devices/{{ device.hash }}/sensors/{{ sensor.name}}/latest">{{ sensor.name}}</a> | <a
          href="/devices/{{ device.hash }}/sensors/{{ sensor.name}}">all data</a></li>
      {% endfor %}
    </ul>
    </p>
  </div>
  <span class="image object">
    <img src="{{ device.image }}" alt="" />
  </span>
</section>

<div class="col-6 col-12-small">
  <form method="post" action="#">
    <div class="col-6 col-12-xsmall">
      <div class="col-12">
        <textarea name="config" id="config" placeholder="config.json" rows="8"
          maxlength="5000">{{ config }}</textarea>
      </div>
      <!-- Break -->
      <div class="col-12">
        <ul class="actions">
          <li><input type="submit" value="Update" class="primary" /></li>
        </ul>
      </div>
    </div>
  </form>
</div>

{% endblock %}
